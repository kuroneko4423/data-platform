# ğŸ“¦ Storage Node

ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿DBã‚’æä¾›ã™ã‚‹ãƒãƒ¼ãƒ‰ã§ã™ã€‚

## ğŸ—ï¸ æ§‹æˆã‚µãƒ¼ãƒ“ã‚¹

| ã‚µãƒ¼ãƒ“ã‚¹ | ãƒãƒ¼ãƒˆ | ç”¨é€” |
|---------|--------|------|
| MinIO | 9000 (API), 9001 (Console) | S3äº’æ›ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ï¼‰ |
| PostgreSQL | 5432 | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿DBï¼ˆAirflow/Superset/Metabaseç”¨ï¼‰ |
| Redis | 6379 | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ |

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
chmod +x setup.sh

# 2. Dockerã®ç¢ºèªï¼ˆæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆã¯è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
./setup.sh check

# 3. ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•
./setup.sh start
```

## ğŸ“‹ ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

```bash
./setup.sh check    # Dockerã®ç¢ºèªãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
./setup.sh start    # ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•
./setup.sh stop     # ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢
./setup.sh restart  # ã‚µãƒ¼ãƒ“ã‚¹ã‚’å†èµ·å‹•
./setup.sh status   # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
./setup.sh logs     # å…¨ãƒ­ã‚°è¡¨ç¤º
./setup.sh logs postgres  # PostgreSQLã®ãƒ­ã‚°è¡¨ç¤º
./setup.sh reset    # å…¨ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ï¼ˆæ³¨æ„ï¼ï¼‰
```

## ğŸ” ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆèªè¨¼æƒ…å ±

### MinIO
- **Console URL**: http://<ã“ã®VMã®IP>:9001
- **Access Key**: minioadmin
- **Secret Key**: minioadmin123

### PostgreSQL
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ | ç”¨é€” |
|-------------|---------|-----------|------|
| postgres | postgres | postgres123 | ç®¡ç†ç”¨ |
| airflow | airflow | airflow123 | Airflowç”¨ |
| superset | superset | superset123 | Supersetç”¨ |
| metabase | metabase | metabase123 | Metabaseç”¨ |
| analytics | analyst | analyst123 | åˆ†æç”¨ |
| hive_metastore | hive | hive123 | Trinoç”¨ |

### Redis
- **Password**: redis123

## ğŸ—‚ï¸ MinIOãƒã‚±ãƒƒãƒˆæ§‹æˆ

èµ·å‹•æ™‚ã«è‡ªå‹•ä½œæˆã•ã‚Œã‚‹ãƒã‚±ãƒƒãƒˆ:

| ãƒã‚±ãƒƒãƒˆå | ç”¨é€” |
|-----------|------|
| bronze | ç”Ÿãƒ‡ãƒ¼ã‚¿ï¼ˆRaw Dataï¼‰ |
| silver | ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ |
| gold | é›†è¨ˆãƒ»åˆ†æç”¨ãƒ‡ãƒ¼ã‚¿ |
| raw | ä¸€æ™‚å–ã‚Šè¾¼ã¿ç”¨ |
| airflow-logs | Airflowãƒ­ã‚° |

## ğŸ”— ä»–ãƒãƒ¼ãƒ‰ã¸ã®æ¥ç¶šæƒ…å ±

ã“ã®ãƒãƒ¼ãƒ‰ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä»–ã®ãƒãƒ¼ãƒ‰ã®`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šã—ã¦ãã ã•ã„:

```bash
# ã“ã®VMã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç¢ºèª
hostname -I | awk '{print $1}'
```

ä»–ãƒãƒ¼ãƒ‰ã®.envã«è¨­å®š:
```
STORAGE_NODE_IP=<ã“ã®VMã®IPã‚¢ãƒ‰ãƒ¬ã‚¹>
```

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
storage-node/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â”œâ”€â”€ setup.sh
â”œâ”€â”€ README.md
â””â”€â”€ init-scripts/
    â””â”€â”€ 01-init-databases.sql
```

## âš ï¸ æœ¬ç•ªç’°å¢ƒã§ã®æ³¨æ„

1. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„
2. å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã«ã¯ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šãŒå¿…è¦ã§ã™
3. ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®è¨­å®šã‚’æ¨å¥¨ã—ã¾ã™
